{
  "id": "customer-followup-sequence",
  "name": "Customer Follow-up Sequence",
  "description": "Automatically follows up with customers after appointments, checking satisfaction and scheduling next visit",
  "type": "sequence",
  "frequency": "once",
  "scheduled_time": null,
  "timezone": "America/Los_Angeles",
  "status": "active",
  "error_policy": "continue",
  "timeout": 3600,
  "max_executions": null,
  "user_id": "system",
  
  "steps": [
    {
      "id": "find-recent-customers",
      "name": "Find Recent Customers",
      "position": 1,
      "description": "Find customers who had appointments in the last 24 hours",
      "execution_mode": "direct",
      "tool_name": "customerdatabase_tool",
      "operation": "find_recent_appointments",
      "parameters": {
        "days": 1,
        "status": "completed"
      },
      "output_key": "recent_customers",
      "condition_type": "always",
      "max_retries": 2,
      "retry_delay": 60
    },
    {
      "id": "send-followup-emails",
      "name": "Send Follow-up Emails",
      "position": 2,
      "description": "Send follow-up emails to customers asking about their experience",
      "execution_mode": "direct",
      "tool_name": "email_tool",
      "operation": "send_bulk_email",
      "parameters": {
        "recipients": "{recent_customers.result}",
        "subject": "How was your recent appointment?",
        "template": "followup_template",
        "include_feedback_form": true
      },
      "output_key": "email_results",
      "condition_type": "if_data",
      "condition_data_key": "recent_customers.result",
      "max_retries": 3,
      "retry_delay": 120
    },
    {
      "id": "schedule-reminder",
      "name": "Schedule Next Appointment Reminder",
      "position": 3,
      "description": "Set a reminder to follow up again in one week for scheduling next appointments",
      "execution_mode": "direct",
      "tool_name": "reminder_tool",
      "operation": "create_reminder",
      "parameters": {
        "title": "Follow up with customers for next appointment",
        "description": "Contact customers from {recent_customers.appointment_date} to schedule their next visit",
        "due_date": "+7 days",
        "priority": "medium"
      },
      "output_key": "reminder_result",
      "condition_type": "if_success",
      "max_retries": 1,
      "retry_delay": 60
    }
  ]
}
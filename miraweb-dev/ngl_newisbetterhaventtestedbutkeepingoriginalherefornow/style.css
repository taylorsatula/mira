		/* Theme Variables */
:root {
	/* Core colors */
	--accent-green: #00ff2d;
	--accent-magenta: #ff00ff;
	--accent-yellow: #ffff00;
	--transition: 0.2s ease;
	
	/* Viewport and keyboard variables */
	--viewport-height: 100vh;
	--viewport-height-small: 100svh;
	--viewport-height-large: 100lvh;
	--viewport-height-dynamic: 100dvh;
	--keyboard-height: env(keyboard-inset-height, 0px);
	--safe-area-top: env(safe-area-inset-top, 0px);
	--safe-area-bottom: env(safe-area-inset-bottom, 0px);
	
	/* Dark theme (default) */
	--bg: #000;
	--bg-overlay: rgba(255, 255, 255, 0.05);
	--bg-overlay-hover: rgba(255, 255, 255, 0.1);
	--bg-overlay-active: rgba(255, 255, 255, 0.2);
	
	--text: #fff;
	--text-secondary: rgba(255, 255, 255, 0.8);
	--text-muted: rgba(255, 255, 255, 0.6);
	--text-faint: rgba(255, 255, 255, 0.4);
	--text-disabled: rgba(255, 255, 255, 0.2);
	
	--border: rgba(255, 255, 255, 0.5);
	--border-secondary: rgba(255, 255, 255, 0.2);
	--border-faint: rgba(255, 255, 255, 0.1);
	
	--scrollbar-thumb: rgba(255, 255, 255, 0.2);
	--scrollbar-thumb-hover: rgba(255, 255, 255, 0.4);
	
	--highlight-bg: rgba(255, 255, 0, 0.3);
	--icon-filter: invert(1);
	--icon-filter-reverse: invert(0);
}

/* Light theme */
[data-theme="light"] {
	--bg: #fff;
	--bg-overlay: rgba(0, 0, 0, 0.05);
	--bg-overlay-hover: rgba(0, 0, 0, 0.1);
	--bg-overlay-active: rgba(0, 0, 0, 0.2);
	
	--text: #000;
	--text-secondary: rgba(0, 0, 0, 0.8);
	--text-muted: rgba(0, 0, 0, 0.6);
	--text-faint: rgba(0, 0, 0, 0.4);
	--text-disabled: rgba(0, 0, 0, 0.2);
	
	--border: rgba(0, 0, 0, 0.5);
	--border-secondary: rgba(0, 0, 0, 0.2);
	--border-faint: rgba(0, 0, 0, 0.1);
	
	--scrollbar-thumb: rgba(0, 0, 0, 0.2);
	--scrollbar-thumb-hover: rgba(0, 0, 0, 0.4);
	
	--highlight-bg: rgba(255, 200, 0, 0.3);
	--icon-filter: invert(0);
	--icon-filter-reverse: invert(1);
}

/* Reset */
* {
	margin: 0;
	padding: 0;
	box-sizing: border-box;
}

body {
	background: var(--bg);
	color: var(--text);
	font-family: 'Avenir', 'Monaco', 'Inconsolata', 'Fira Code', monospace;
	font-weight: 100;
	height: var(--viewport-height-dynamic);
	height: 100dvh;
	overflow: hidden;
	transition: background-color var(--transition), color var(--transition);
}

/* Utility Classes */
.hidden { display: none; }
.text-muted { color: var(--text-muted); }
.text-faint { color: var(--text-faint); }
.text-secondary { color: var(--text-secondary); }
.bg-overlay { background: var(--bg-overlay); }
.bg-overlay-hover { background: var(--bg-overlay-hover); }
.border-secondary { border-color: var(--border-secondary); }
.border-faint { border-color: var(--border-faint); }
.transition-all { transition: all var(--transition); }

/* Search highlighting */
.search-highlight {
	background: var(--highlight-bg);
	padding: 0 2px;
	border-radius: 2px;
}

/* Common Button Styles */
.btn {
	background: transparent;
	border: 1px solid var(--border);
	border-radius: 8px;
	cursor: pointer;
	display: flex;
	align-items: center;
	justify-content: center;
	transition: all var(--transition);
}

.btn:hover {
	background: var(--bg-overlay-hover);
	border-color: var(--text);
}

.btn img,
.btn svg {
	opacity: 0.8;
	transition: opacity var(--transition);
	filter: var(--icon-filter);
}

.btn:hover img,
.btn:hover svg {
	opacity: 1;
}

/* Scrollbar */
.custom-scrollbar::-webkit-scrollbar {
	width: 6px;
}

.custom-scrollbar::-webkit-scrollbar-track {
	background: transparent;
}

.custom-scrollbar::-webkit-scrollbar-thumb {
	background: var(--scrollbar-thumb);
	border-radius: 3px;
}

.custom-scrollbar::-webkit-scrollbar-thumb:hover {
	background: var(--scrollbar-thumb-hover);
}

/* Loading Screen */
#loading-screen {
	position: fixed;
	inset: 0;
	background: transparent;
	display: flex;
	align-items: center;
	justify-content: center;
	font-family: monospace;
	font-size: 16px;
	line-height: 1;
	opacity: 0;
	pointer-events: none;
	transition: opacity var(--transition);
	z-index: 1000;
}

#loading-screen.active {
	opacity: 1;
	pointer-events: auto;
}

.ascii-container {
	width: 100%;
	text-align: center;
	color: var(--text-secondary);
}

.ascii-char {
	display: inline-block;
	opacity: 0;
	transition: opacity 0.05s ease;
}

.ascii-char.visible {
	opacity: 1;
}

/* History Sidebar */
#history-drawer {
	position: fixed;
	left: -400px;
	top: 0;
	width: 400px;
	height: var(--viewport-height-dynamic);
	height: 100dvh;
	background: var(--bg);
	border-right: 1px solid var(--border-secondary);
	transition: left 0.3s ease;
	overflow: hidden;
	z-index: 99;
	display: flex;
	flex-direction: column;
}

#history-drawer.open {
	left: 0;
}

/* Navigation */
.menu-wrapper {
	position: relative;
	z-index: 101;
}

#history-toggle {
	position: fixed;
	left: 20px;
	top: calc(20px + env(safe-area-inset-top));
	width: 40px;
	height: 40px;
	z-index: 101;
	transition: left 0.3s ease;
}

#history-toggle img {
	width: 24px;
	height: 24px;
}

#history-drawer.open ~ nav #history-toggle {
	left: 420px;
}

.menu-icons {
	position: fixed;
	left: 70px;
	top: calc(20px + env(safe-area-inset-top));
	display: flex;
	gap: 10px;
	transition: all 0.3s ease;
	z-index: 101;
}

#history-drawer.open ~ nav .menu-icons {
	left: 470px;
}

.menu-icons .btn {
	width: 40px;
	height: 40px;
}

.menu-icons img {
	width: 20px;
	height: 20px;
}

/* Theme Toggle Icons */
#theme-toggle {
	position: relative;
	overflow: hidden;
}

.theme-icon-light,
.theme-icon-dark {
	position: absolute;
	top: 50%;
	left: 50%;
	transform: translate(-50%, -50%);
	transition: opacity var(--transition);
	width: 20px;
	height: 20px;
}

[data-theme="light"] .theme-icon-light {
	opacity: 1;
}

[data-theme="light"] .theme-icon-dark {
	opacity: 0;
}

:root:not([data-theme]) .theme-icon-light,
[data-theme="dark"] .theme-icon-light {
	opacity: 0;
}

:root:not([data-theme]) .theme-icon-dark,
[data-theme="dark"] .theme-icon-dark {
	opacity: 1;
}

/* History Header */
.history-header {
	padding: 20px;
	border-bottom: 1px solid var(--border-faint);
	flex-shrink: 0;
}

.history-search {
	width: 100%;
	background: var(--bg-overlay);
	border: 1px solid var(--border-secondary);
	border-radius: 8px;
	padding: 10px 16px;
	color: var(--text);
	font-size: 14px;
	outline: none;
	transition: all var(--transition);
	font-family: inherit;
	margin-bottom: 16px;
	height: 40px;
}

.history-search:focus {
	background: var(--bg-overlay-hover);
	border-color: var(--border);
}

/* Tabs */
.tabs {
	display: flex;
	gap: 8px;
	margin-bottom: 16px;
}

.tab-button {
	padding: 8px 16px;
	background: transparent;
	border: 1px solid var(--border-secondary);
	border-radius: 20px;
	color: var(--text-muted);
	font-size: 13px;
	cursor: pointer;
	transition: all var(--transition);
	font-family: inherit;
}

.tab-button.active {
	background: var(--bg-overlay-hover);
	color: var(--text);
	border-color: var(--border);
}

.tab-button:hover {
	color: var(--text);
	border-color: var(--text-faint);
}

/* Date Picker */
.date-picker-wrapper {
	position: relative;
}

.date-picker {
	display: flex;
	align-items: center;
	gap: 8px;
	padding: 8px 12px;
	background: var(--bg-overlay);
	border-radius: 8px;
	font-size: 13px;
	cursor: pointer;
	transition: all var(--transition);
}

.date-picker:hover {
	background: var(--bg-overlay-hover);
}

.date-picker svg {
	width: 16px;
	height: 16px;
	fill: var(--text-muted);
}

/* Calendar Popup */
.calendar-popup {
	position: absolute;
	top: 100%;
	left: 0;
	right: 0;
	margin-top: 8px;
	background: var(--bg);
	border: 1px solid var(--border-secondary);
	border-radius: 12px;
	padding: 16px;
	opacity: 0;
	pointer-events: none;
	transform: translateY(-10px);
	transition: all var(--transition);
	z-index: 200;
	backdrop-filter: blur(10px);
	-webkit-backdrop-filter: blur(10px);
}

.calendar-popup.active {
	opacity: 1;
	pointer-events: auto;
	transform: translateY(0);
}

.calendar-header {
	display: flex;
	justify-content: space-between;
	align-items: center;
	margin-bottom: 16px;
}

.calendar-month {
	font-size: 14px;
	font-weight: 500;
}

.calendar-nav {
	display: flex;
	gap: 8px;
}

.calendar-nav button {
	background: transparent;
	border: 1px solid var(--border-secondary);
	color: var(--text);
	width: 28px;
	height: 28px;
	border-radius: 6px;
	cursor: pointer;
	display: flex;
	align-items: center;
	justify-content: center;
	transition: all var(--transition);
	font-family: inherit;
}

.calendar-nav button:hover {
	background: var(--bg-overlay-hover);
	border-color: var(--text-faint);
}

.calendar-grid {
	display: grid;
	grid-template-columns: repeat(7, 1fr);
	gap: 4px;
}

.calendar-day-header {
	font-size: 11px;
	color: var(--text-faint);
	text-align: center;
	padding: 8px 0;
}

.calendar-day {
	aspect-ratio: 1;
	display: flex;
	align-items: center;
	justify-content: center;
	border-radius: 6px;
	font-size: 13px;
	cursor: pointer;
	transition: all var(--transition);
	position: relative;
}

.calendar-day:hover:not(.disabled) {
	background: var(--bg-overlay-hover);
}

.calendar-day.active {
	background: var(--bg-overlay-active);
	color: var(--text);
}

.calendar-day.today {
	border: 1px solid var(--border);
}

.calendar-day.has-data::after {
	content: '';
	position: absolute;
	bottom: 2px;
	left: 50%;
	transform: translateX(-50%);
	width: 3px;
	height: 3px;
	background: var(--accent-green);
	border-radius: 50%;
	animation: pulseDot 3s ease-in-out infinite;
}

@keyframes pulseDot {
	0%, 100% {
		box-shadow: 0 0 2px 1px rgba(0, 255, 0, 0);
	}
	50% {
		box-shadow: 0 0 2px 1px rgba(0, 255, 0, 0.6);
	}
}

.calendar-day.disabled {
	color: var(--text-disabled);
	cursor: default;
}

/* History Content */
.history-content {
	flex: 1;
	overflow-y: auto;
	padding: 0;
}

.date-group {
	border-bottom: 1px solid var(--border-faint);
}

.date-header {
	padding: 16px 20px;
	background: var(--bg-overlay);
	font-size: 12px;
	color: var(--text-faint);
	text-transform: uppercase;
	letter-spacing: 0.5px;
	position: sticky;
	top: 0;
	z-index: 10;
	backdrop-filter: blur(4px);
	-webkit-backdrop-filter: blur(4px);
	border-bottom: 1px solid var(--border-faint);
}

.conversation-item {
	padding: 16px 20px;
	border-bottom: 1px solid var(--border-faint);
	cursor: pointer;
	transition: all var(--transition);
}

.conversation-item:hover {
	background: var(--bg-overlay);
	padding-left: 24px;
}

.conversation-time {
	font-size: 11px;
	color: var(--text-faint);
	margin-bottom: 4px;
}

.conversation-user {
	font-size: 14px;
	color: var(--text-secondary);
	margin-bottom: 6px;
	display: -webkit-box;
	-webkit-line-clamp: 2;
	-webkit-box-orient: vertical;
	overflow: hidden;
}

.conversation-mira {
	font-size: 13px;
	color: var(--text-muted);
	display: -webkit-box;
	-webkit-line-clamp: 2;
	-webkit-box-orient: vertical;
	overflow: hidden;
	line-height: 1.4;
}

/* Empty State */
.empty-state {
	padding: 40px 20px;
	text-align: center;
	color: var(--text-faint);
	font-size: 14px;
}

/* Modal Styles */
.modal-backdrop {
	position: fixed;
	inset: 0;
	background: rgba(0, 0, 0, 0.2);
	backdrop-filter: blur(5px);
	-webkit-backdrop-filter: blur(2px);
	display: flex;
	align-items: center;
	justify-content: center;
	z-index: 1000;
	opacity: 0;
	pointer-events: none;
	transition: opacity var(--transition);
}

.modal-backdrop:not(.hidden) {
	opacity: 1;
	pointer-events: auto;
}

.modal-content {
	background: var(--bg);
	border: 1px solid var(--border-secondary);
	border-radius: 12px;
	width: min(500px, 90vw);
	max-height: 80vh;
	overflow: hidden;
	transform: scale(0.9);
	transition: transform var(--transition);
}

.modal-backdrop:not(.hidden) .modal-content {
	transform: scale(1);
}

.modal-header {
	display: flex;
	justify-content: space-between;
	align-items: center;
	padding: 20px;
	border-bottom: 1px solid var(--border-faint);
}

.modal-header h2 {
	font-size: 18px;
	font-weight: 500;
	margin: 0;
}

.modal-close {
	width: 32px;
	height: 32px;
	padding: 0;
}

.modal-body {
	padding: 20px;
	overflow-y: auto;
	max-height: calc(80vh - 73px);
}

/* Main Content */
main {
	position: fixed;
	top: 10vh;
	bottom: 140px;
	left: 0;
	right: 0;
	display: flex;
	align-items: center;
	justify-content: center;
	pointer-events: none;
	overflow: hidden;
}

.response-container {
	max-width: 700px;
	width: 90%;
	max-height: 100%;
	opacity: 0;
	transition: opacity 0.3s ease;
	pointer-events: auto;
}

.response-container.active {
	opacity: 1;
}

.response-box {
	color: var(--text);
	font-size: 18px;
	line-height: 1.8;
	word-break: break-word;
	opacity: 0;
}

.response-container.active .response-box:not(.exiting) {
	animation: bubbleUp 0.8s ease-out forwards;
}

.response-content {
	max-height: calc(var(--viewport-height-dynamic) - 200px - var(--keyboard-height));
	max-height: calc(100dvh - 200px - var(--keyboard-height));
	overflow-y: auto;
	padding-right: 20px;
	letter-spacing: 0.3px;
}

@keyframes bubbleUp {
	from {
		opacity: 0.3;
		transform: translateY(60px);
		filter: blur(5px);
	}
	to {
		opacity: 1;
		transform: translateY(0);
		filter: blur(0px);
	}
}

@keyframes wooshOut {
	from {
		opacity: 1;
		transform: translateY(0);
		filter: blur(0);
	}
	to {
		opacity: 0;
		transform: translateY(-80px) scale(0.9);
		filter: blur(15px);
	}
}

.response-box.exiting {
	animation: wooshOut 1.25s ease-out forwards;
}

/* Input Section */
.input-section {
	position: fixed;
	bottom: 40px;
	left: 50%;
	transform: translateX(-50%);
	width: min(600px, 90vw);
	z-index: 20;
	transition: transform 0.3s ease;
}

.status-badges {
	display: flex;
	justify-content: flex-end;
	margin-bottom: 12px;
	align-items: center;
	gap: 8px;
}

.status-badge {
	width: 32px;
	height: 32px;
	padding: 8px;
	border-radius: 6px;
	opacity: 0.1;
	transition: all 0.5s cubic-bezier(0.1, 0.4, 0.2, 1);
	display: flex;
	align-items: center;
	justify-content: center;
	cursor: pointer;
	box-sizing: border-box;
}

.status-badge.active {
	opacity: 1;
}


.status-badge:not(.active) {
	opacity: 0.3;
	animation: customFadeOut 3s ease forwards;
}

@keyframes customFadeOut {
	0% { opacity: 1; }
	60% { opacity: 0.17; }
	80% { opacity: 0.17; }
	88% { opacity: 0.22; }
	90% { opacity: 0.16; }
	92% { opacity: 0.19; }
	94% { opacity: 0.15; }
	96% { opacity: 0.18; }
	98% { opacity: 0.12; }
	100% { opacity: 0.1; }
}

@keyframes halogenFlicker {
	0% { opacity: 0.1; }
	8% { opacity: 0.6; }
	12% { opacity: 0.1; }
	20% { opacity: 0.1; }
	25% { opacity: 0.7; }
	30% { opacity: 0.1; }
	40% { opacity: 0.1; }
	45% { opacity: 0.8; }
	50% { opacity: 0.1; }
	60% { opacity: 0.7; }
	65% { opacity: 0.1; }
	70% { opacity: 0.8; }
	75% { opacity: 0.1; }
	80% { opacity: 0.8; }
	85% { opacity: 0.1; }
	90% { opacity: 0.8; }
	95% { opacity: 0.7; }
	100% { opacity: 1; }
}

.status-badge img {
	display: block;
	width: 16px;
	height: 16px;
	filter: var(--icon-filter-reverse);
}

/* Badge colors */
.status-badge.tool {
	background: var(--accent-green);
}

.status-badge.workflow {
	background: var(--accent-magenta);
}

/* Queue indicator */
.queue-indicator {
	display: flex;
	align-items: center;
	gap: 4px;
	padding: 6px 10px;
	background: red;
	color: var(--bg);
	border-radius: 20px;
	border: 2px solid rgb(170, 0, 0);
	font-size: 12px;
	font-weight: 500;
	cursor: pointer;
	transition: all var(--transition);
	animation: rattle 2s infinite;
	box-sizing: border-box;
}

.queue-indicator:hover {
	transform: scale(1.05);
}

.queue-indicator.hidden {
	display: none;
}

.queue-count {
	min-width: 1ch;
	text-align: center;
}

.queue-indicator img {
	width: 16px;
	height: 16px;
	filter: var(--icon-filter-reverse);
}

@keyframes rattle {
	0%, 90% { transform: rotate(0deg); }
	92% { transform: rotate(-5deg); }
	94% { transform: rotate(5deg); }
	96% { transform: rotate(-5deg); }
	98% { transform: rotate(5deg); }
	100% { transform: rotate(0deg); }
}

/* Popover containers */
.workflow-container,
.queue-container {
	position: relative;
}

/* Base popover class */
.popover {
	position: absolute;
	bottom: calc(100% + 20px);
	left: 50%;
	transform: translateX(-50%);
	background: var(--bg);
	border: 1px solid var(--border-secondary);
	border-radius: 12px;
	padding: 16px;
	min-width: 250px;
	opacity: 0;
	pointer-events: none;
	transition: all var(--transition);
	backdrop-filter: blur(10px);
	-webkit-backdrop-filter: blur(10px);
	z-index: 50;
	box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

/* Popover arrow */
.popover::after {
	content: '';
	position: absolute;
	top: 100%;
	left: 50%;
	transform: translateX(-50%);
	width: 0;
	height: 0;
	border-left: 8px solid transparent;
	border-right: 8px solid transparent;
	border-top: 8px solid var(--bg);
}

/* Popover arrow border */
.popover::before {
	content: '';
	position: absolute;
	top: 100%;
	left: 50%;
	transform: translateX(-50%);
	width: 0;
	height: 0;
	border-left: 9px solid transparent;
	border-right: 9px solid transparent;
	border-top: 9px solid var(--border-secondary);
	z-index: -1;
}

/* Active state */
.popover.active {
	opacity: 1;
	pointer-events: auto;
}

/* Popover close button (hidden by default) */
.popover-close {
	display: none;
	position: absolute;
	top: 16px;
	right: 16px;
	width: 32px;
	height: 32px;
	background: transparent;
	border: 1px solid var(--border-secondary);
	border-radius: 50%;
	cursor: pointer;
	align-items: center;
	justify-content: center;
	font-size: 20px;
	color: var(--text-secondary);
	transition: all var(--transition);
}

.popover-close:hover {
	background: var(--bg-overlay-hover);
	border-color: var(--text-faint);
}

/* Mobile fullscreen - nuclear option */
.mobile-fullscreen {
	position: fixed !important;
	top: 0 !important;
	left: 0 !important;
	right: 0 !important;
	bottom: 0 !important;
	width: 100vw !important;
	height: 100vh !important;
	transform: none !important;
	margin: 0 !important;
	background: var(--bg);
	border: none;
	border-radius: 0;
	padding: calc(60px + env(safe-area-inset-top)) 20px calc(20px + env(safe-area-inset-bottom));
	overflow-y: auto;
	z-index: 200;
}

.mobile-fullscreen::after,
.mobile-fullscreen::before {
	display: none;
}

.mobile-fullscreen .popover-close {
	display: flex;
}

.workflow-step {
	padding: 4px;
	margin: 4px 0;
	font-size: 13px;
	color: var(--text-muted);
	border-left: 3px solid var(--border-faint);
	transition: all var(--transition);
}

.workflow-step.completed {
	color: var(--text-secondary);
	border-left-color: var(--accent-green);
	opacity: 0.8;
}

.workflow-step.completed::before {
	content: '✓ ';
	color: var(--accent-green);
	font-weight: bold;
}

.workflow-step.active {
	color: var(--text);
	border-left-color: var(--accent-magenta);
	background: var(--bg-overlay);
	font-weight: 500;
}

.workflow-step.pending {
	opacity: 0.5;
}

/* Specific popover widths */
.queue-popover {
	min-width: 300px;
	max-width: 400px;
}

.queue-header {
	font-size: 14px;
	font-weight: 500;
	margin-bottom: 12px;
	color: var(--text-secondary);
}

.queue-message {
	background: var(--bg-overlay);
	border: 1px solid var(--border-faint);
	border-radius: 8px;
	padding: 12px;
	margin-bottom: 8px;
	transition: all var(--transition);
}

.queue-message:hover {
	background: var(--bg-overlay-hover);
	border-color: var(--border-secondary);
}

.queue-message-text {
	font-size: 13px;
	color: var(--text-secondary);
	margin-bottom: 8px;
	display: -webkit-box;
	-webkit-line-clamp: 2;
	-webkit-box-orient: vertical;
	overflow: hidden;
}

.queue-message-time {
	font-size: 11px;
	color: var(--text-faint);
	margin-bottom: 8px;
}

.queue-message-actions {
	display: flex;
	gap: 8px;
}

.queue-send-btn,
.queue-remove-btn {
	padding: 4px 12px;
	border: 1px solid var(--border-secondary);
	border-radius: 4px;
	background: transparent;
	color: var(--text-secondary);
	font-size: 12px;
	cursor: pointer;
	transition: all var(--transition);
	font-family: inherit;
}

.queue-send-btn:hover {
	background: var(--accent-green);
	color: var(--bg);
	border-color: var(--accent-green);
}

.queue-remove-btn:hover {
	background: var(--bg-overlay-active);
	border-color: var(--text-faint);
}

.input-container {
	position: relative;
	z-index: 5;
	overflow: visible;
}

.input-container.firing {
	z-index: 10;
}

.input-pill {
	width: 100%;
	background: var(--bg);
	color: var(--text);
	border: 1px solid var(--border-secondary);
	border-radius: 8px;
	padding: 16px 60px 16px 24px;
	font-size: 15px;
	outline: none;
	transition: border-color var(--transition), background-color var(--transition);
	font-family: inherit;
	position: relative;
	z-index: 2;
}

.input-pill:focus {
	background: var(--bg);
	border-color: var(--border);
	box-shadow: 0 0 0 2px var(--border-faint);
}

.input-container.firing .input-pill:focus {
	background: var(--bg);
	border-color: var(--border-secondary);
	box-shadow: none;
}

.input-pill::placeholder {
	color: var(--text-faint);
}

.ghost-text {
	position: absolute;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
	padding: 16px 60px 16px 24px;
	color: var(--text-faint);
	pointer-events: none;
	font-size: 15px;
	line-height: 1;
	display: flex;
	align-items: center;
	font-family: inherit;
}

.send-button {
	position: absolute;
	right: 8px;
	top: 50%;
	transform: translateY(-50%);
	width: 36px;
	height: 36px;
	background: var(--bg-overlay-hover);
	border: 1px solid var(--border-secondary);
	border-radius: 50%;
	cursor: pointer;
	display: flex;
	align-items: center;
	justify-content: center;
	transition: all var(--transition);
}

.send-button:hover {
	background: var(--bg-overlay-active);
	border-color: var(--border);
	transform: translateY(-50%) scale(1.05);
}

.send-button:active {
	transform: translateY(-50%) scale(0.95);
}

.send-button:disabled {
	opacity: 0.5;
	cursor: not-allowed;
}

.send-button:disabled:hover {
	background: var(--bg-overlay-hover);
	transform: translateY(-50%);
}

.send-button svg {
	width: 20px;
	height: 20px;
	fill: var(--text-secondary);
}

/* Message Projectile */
.message-projectile {
	position: absolute;
	top: 0;
	left: 0;
	width: calc(100% - 20px);
	height: 100%;
	font-size: 15px;
	color: var(--text);
	pointer-events: none;
	z-index: 1;
	white-space: nowrap;
	overflow: hidden;
	text-overflow: ellipsis;
	line-height: 1.4;
	will-change: transform, opacity;
	padding: 16px 60px 16px 24px;
	display: flex;
	align-items: center;
	opacity: 0;
	text-align: left;
}

/* Mobile Responsive Design - using pointer: coarse for touch detection */
@media (pointer: coarse), (max-width: 768px) {
	/* Fixed navigation header on mobile */
	.menu-wrapper {
		position: fixed;
		top: 0;
		left: 0;
		right: 0;
		height: calc(60px + env(safe-area-inset-top));
		background: var(--bg);
		border-bottom: 1px solid var(--border-faint);
		display: flex;
		align-items: center;
		padding: env(safe-area-inset-top) 20px 0 20px;
		z-index: 102;
	}
	
	/* Keep buttons in fixed positions */
	#history-toggle {
		position: relative;
		left: 0;
		top: 0;
		margin-right: 10px;
	}
	
	.menu-icons {
		position: relative;
		left: 0;
		top: 0;
		margin-left: auto;
	}
	
	/* Don't move buttons when sidebar opens */
	#history-drawer.open ~ nav #history-toggle,
	#history-drawer.open ~ nav .menu-icons {
		left: 0;
	}
	
	/* Full-width sidebar */
	#history-drawer {
		width: 100%;
		left: -100%;
		top: calc(60px + env(safe-area-inset-top)); /* Below fixed header */
		height: calc(100vh - 60px - env(safe-area-inset-top));
	}
	
	
	/* Adjust history header for search on separate row */
	.history-header {
		padding-top: 20px; /* Normal padding, header is below fixed nav */
	}
	
	/* Better input section spacing */
	.input-section {
		bottom: calc(20px + env(safe-area-inset-bottom));
		width: calc(100vw - 40px);
	}
	
}

